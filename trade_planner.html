<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Order Calculator</title>
    <style>
        :root {
            --primary: #2962ff;
            --primary-dark: #0039cb;
            --secondary: #455a64;
            --success: #00c853;
            --danger: #ff1744;
            --background: #121212;
            --surface: #1e1e1e;
            --on-surface: #ffffff;
            --on-surface-secondary: #b0b0b0;
            --border: #333333;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--on-surface);
            padding: 16px;
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 24px;
            padding: 16px;
            background-color: var(--surface);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: var(--primary);
        }

        .card {
            background-color: var(--surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }

        .form-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--on-surface-secondary);
        }

        input, select {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background-color: #2a2a2a;
            color: var(--on-surface);
            font-size: 16px;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .toggle-group {
            display: flex;
            margin-bottom: 16px;
            background-color: #2a2a2a;
            border-radius: 8px;
            overflow: hidden;
        }

        .toggle-option {
            flex: 1;
            text-align: center;
            padding: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .toggle-option.active {
            background-color: var(--primary);
            color: white;
            font-weight: 600;
        }

        .results {
            margin-top: 24px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            color: var(--on-surface-secondary);
        }

        .result-value {
            font-weight: 600;
        }

        .profit {
            color: var(--success);
        }

        .loss {
            color: var(--danger);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        th {
            color: var(--on-surface-secondary);
            font-weight: 500;
        }

        tr.highlight {
            background-color: rgba(41, 98, 255, 0.15);
            border-left: 3px solid var(--primary);
        }

        .settings-toggle {
            text-align: center;
            margin: 16px 0;
            color: var(--primary);
            cursor: pointer;
        }

        .settings-panel {
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.3s ease-out;
        }

        .settings-panel.open {
            max-height: 500px;
        }

        @media (max-width: 480px) {
            input, select, .toggle-option {
                padding: 12px;
            }
            
            th, td {
                padding: 8px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Trading Order Calculator</h1>
            <p>Calculate your profit targets and stop losses</p>
        </header>

        <div class="card">
            <div class="form-group">
                <label for="entryPrice">Entry Price (A)</label>
                <input type="number" id="entryPrice" placeholder="Enter entry price" step="0.0001" required>
            </div>

            <div class="form-group">
                <label for="takeProfitInput">Take Profit (B)</label>
                <div class="toggle-group">
                    <div class="toggle-option active" id="togglePercentage">Percentage</div>
                    <div class="toggle-option" id="togglePrice">Price</div>
                </div>
                <input type="number" id="takeProfitInput" placeholder="Enter take profit percentage" step="0.01" required>
            </div>

            <div class="form-group">
                <label for="riskReward">R:R Ratio (C) <span style="color: var(--on-surface-secondary); font-weight: normal;">(optional)</span></label>
                <input type="text" id="riskReward" placeholder="e.g., 1:3" value="1:3">
            </div>

            <div class="form-group">
                <label for="entryAmount">Entry Amount (D) <span style="color: var(--on-surface-secondary); font-weight: normal;">(optional)</span></label>
                <div class="toggle-group">
                    <div class="toggle-option active" id="toggleUSD">USD</div>
                    <div class="toggle-option" id="toggleShares">Shares</div>
                </div>
                <input type="number" id="entryAmount" placeholder="Enter amount" step="0.01">
            </div>
        </div>

        <div class="settings-toggle" id="settingsToggle">
            Show Settings &#9660;
        </div>

        <div class="card settings-panel" id="settingsPanel">
            <div class="form-group">
                <label for="percentages">Alternate Percentage Values</label>
                <input type="text" id="percentages" placeholder="Comma-separated values" value="0.5,1,1.5,2,2.5,3">
            </div>
        </div>

        <div class="card results">
            <h2>Calculation Results</h2>
            <div class="result-item">
                <span class="result-label">Take Profit Price:</span>
                <span class="result-value" id="takeProfitPrice">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">Stop Price:</span>
                <span class="result-value" id="stopPrice">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">Profit per Share:</span>
                <span class="result-value profit" id="profitPerShare">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">Risk per Share:</span>
                <span class="result-value loss" id="riskPerShare">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">Total Profit:</span>
                <span class="result-value profit" id="totalProfit">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">Total Risk:</span>
                <span class="result-value loss" id="totalRisk">-</span>
            </div>
        </div>

        <div class="card">
            <h2>Alternate Scenarios</h2>
            <table id="scenariosTable">
                <thead>
                    <tr>
                        <th>Take Profit %</th>
                        <th>Take Profit Price</th>
                        <th>Stop Price</th>
                        <th>Profit/Share</th>
                        <th>Risk/Share</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const entryPriceInput = document.getElementById('entryPrice');
            const takeProfitInput = document.getElementById('takeProfitInput');
            const riskRewardInput = document.getElementById('riskReward');
            const entryAmountInput = document.getElementById('entryAmount');
            const percentagesInput = document.getElementById('percentages');
            
            const togglePercentage = document.getElementById('togglePercentage');
            const togglePrice = document.getElementById('togglePrice');
            const toggleUSD = document.getElementById('toggleUSD');
            const toggleShares = document.getElementById('toggleShares');
            const settingsToggle = document.getElementById('settingsToggle');
            const settingsPanel = document.getElementById('settingsPanel');
            
            const takeProfitPriceEl = document.getElementById('takeProfitPrice');
            const stopPriceEl = document.getElementById('stopPrice');
            const profitPerShareEl = document.getElementById('profitPerShare');
            const riskPerShareEl = document.getElementById('riskPerShare');
            const totalProfitEl = document.getElementById('totalProfit');
            const totalRiskEl = document.getElementById('totalRisk');
            const scenariosTable = document.getElementById('scenariosTable').querySelector('tbody');

            // State
            let isPercentageMode = true;
            let isUSDMode = true;

            // Event Listeners
            entryPriceInput.addEventListener('input', calculate);
            takeProfitInput.addEventListener('input', calculate);
            riskRewardInput.addEventListener('input', calculate);
            entryAmountInput.addEventListener('input', calculate);
            percentagesInput.addEventListener('input', calculate);

            togglePercentage.addEventListener('click', () => {
                togglePercentage.classList.add('active');
                togglePrice.classList.remove('active');
                isPercentageMode = true;
                takeProfitInput.placeholder = 'Enter take profit percentage';
                takeProfitInput.step = '0.01';
                calculate();
            });

            togglePrice.addEventListener('click', () => {
                togglePrice.classList.add('active');
                togglePercentage.classList.remove('active');
                isPercentageMode = false;
                takeProfitInput.placeholder = 'Enter take profit price';
                takeProfitInput.step = '0.0001';
                calculate();
            });

            toggleUSD.addEventListener('click', () => {
                toggleUSD.classList.add('active');
                toggleShares.classList.remove('active');
                isUSDMode = true;
                calculate();
            });

            toggleShares.addEventListener('click', () => {
                toggleShares.classList.add('active');
                toggleUSD.classList.remove('active');
                isUSDMode = false;
                calculate();
            });

            settingsToggle.addEventListener('click', () => {
                settingsPanel.classList.toggle('open');
                settingsToggle.innerHTML = settingsPanel.classList.contains('open') ? 
                    'Hide Settings &#9650;' : 'Show Settings &#9660;';
            });

            // Calculation functions
            function calculate() {
                const entryPrice = parseFloat(entryPriceInput.value);
                if (!entryPrice || entryPrice <= 0) return;

                const takeProfitValue = parseFloat(takeProfitInput.value);
                if (!takeProfitValue) return;

                // Calculate take profit price
                let takeProfitPrice;
                if (isPercentageMode) {
                    takeProfitPrice = entryPrice * (1 + takeProfitValue / 100);
                } else {
                    takeProfitPrice = takeProfitValue;
                }

                // Calculate R:R ratio
                let riskRewardRatio = 3; // Default to 1:3
                if (riskRewardInput.value) {
                    const parts = riskRewardInput.value.split(':');
                    if (parts.length === 2) {
                        riskRewardRatio = parseFloat(parts[1]) / parseFloat(parts[0]);
                    }
                }

                // Calculate stop price
                const profitPerShare = takeProfitPrice - entryPrice;
                const riskPerShare = Math.abs(profitPerShare / riskRewardRatio);
                const stopPrice = profitPerShare >= 0 ? 
                    entryPrice - riskPerShare : 
                    entryPrice + riskPerShare;

                // Update results
                takeProfitPriceEl.textContent = takeProfitPrice.toFixed(4);
                stopPriceEl.textContent = stopPrice.toFixed(4);
                profitPerShareEl.textContent = profitPerShare.toFixed(4);
                riskPerShareEl.textContent = riskPerShare.toFixed(4);

                // Calculate totals if amount is provided
                const entryAmount = parseFloat(entryAmountInput.value);
                if (entryAmount && entryAmount > 0) {
                    if (isUSDMode) {
                        const shares = entryAmount / entryPrice;
                        totalProfitEl.textContent = (profitPerShare * shares).toFixed(2);
                        totalRiskEl.textContent = (riskPerShare * shares).toFixed(2);
                    } else {
                        totalProfitEl.textContent = (profitPerShare * entryAmount).toFixed(2);
                        totalRiskEl.textContent = (riskPerShare * entryAmount).toFixed(2);
                    }
                } else {
                    totalProfitEl.textContent = '-';
                    totalRiskEl.textContent = '-';
                }

                // Generate scenarios
                generateScenarios(entryPrice, riskRewardRatio, entryAmount, isUSDMode);
            }

            function generateScenarios(entryPrice, riskRewardRatio, entryAmount, isUSD) {
                // Get percentages from input or use defaults
                let percentages;
                try {
                    percentages = percentagesInput.value.split(',').map(p => parseFloat(p.trim()));
                } catch (e) {
                    percentages = [0.5, 1, 1.5, 2, 2.5, 3];
                }

                // Clear table
                scenariosTable.innerHTML = '';

                // Get current take profit percentage for highlighting
                const currentTakeProfit = isPercentageMode ? 
                    parseFloat(takeProfitInput.value) : 
                    ((parseFloat(takeProfitInput.value) - entryPrice) / entryPrice) * 100;

                // Add rows for each percentage
                percentages.forEach(p => {
                    const takeProfitPrice = entryPrice * (1 + p / 100);
                    const profitPerShare = takeProfitPrice - entryPrice;
                    const riskPerShare = Math.abs(profitPerShare / riskRewardRatio);
                    const stopPrice = profitPerShare >= 0 ? 
                        entryPrice - riskPerShare : 
                        entryPrice + riskPerShare;

                    const row = document.createElement('tr');
                    
                    // Highlight if this is the current percentage (with some tolerance for floating point)
                    if (Math.abs(p - currentTakeProfit) < 0.1) {
                        row.classList.add('highlight');
                    }

                    row.innerHTML = `
                        <td>${p}%</td>
                        <td>${takeProfitPrice.toFixed(4)}</td>
                        <td>${stopPrice.toFixed(4)}</td>
                        <td class="profit">${profitPerShare.toFixed(4)}</td>
                        <td class="loss">${riskPerShare.toFixed(4)}</td>
                    `;

                    scenariosTable.appendChild(row);
                });
            }

            // Initialize with default values for demonstration
            entryPriceInput.value = "232";
            takeProfitInput.value = "1";
            calculate();
        });
    </script>
</body>
</html>